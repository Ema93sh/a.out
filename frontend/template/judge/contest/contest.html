{% extends 'base.html' %}
{% block title %} Contest {% endblock %}

{% block menu_buttons %}
<li><a href="/">Home</a></li>
<li class="current_page_item"><a href="/contest">Contest</a></li>
<li><a href="/practice">Practice</a></li>
{% endblock %}

{% block head %}
<script type="text/javascript" src="/static/jquery.js"></script>
<script type="text/javascript" src="/static/jquery.dataTables.js"></script>
<script>
	$(document).ready(function(){
		    // Initalize DataTables on <table> tag with id="example"
			        $('#example').dataTable();  
			});
</script>

<link type="text/css" rel="stylesheet" href="/static/demo_table.css">
{% endblock %}

{% block content %}
<h2 class="title"><a href="/contest">Contest</a></h2>
<div id="entry">
	<h3>Present Contest:</h3>
	<table cellpadding="0" cellspacing="0" border="0" class="display" id="example" width="100%">
		<thead>
			<th> Code </th>
			<th> Title </th>
			<th> Start Time </th>
			<th> End Time </th>
			<th> Status </th>
		</thead>

		<tbody>
		{% for contest in contests %}	
		{% if contest.isActive %}
		<tr class="gradeA">
			<td>{{ contest.code }} </td>
			{% if request.user in contest.users.all %}
			<td><a href="/contest/{{ contest.code }}/">{{ contest.name }}</a></td>
			{% else %}
			<td>{{ contest.name }}</td>
			{% endif %}
			<td>{{ contest.startTime }}</td>
			<td>{{ contest.endTime }}</td>
			{% if request.user in contest.users.all %}
			<td>Registered</td>
			{% else %}
			<td>Not Registered</td>
			{% endif %}
		</tr>
		{% endif %}
		{% endfor %}
	</tbody>
</table>
{% if future_contest %}
<br>
<hr>
<br>
<br>
	<h3>Upcoming Contest:</h3>
	<table cellpadding="0" cellspacing="0" border="0" class="display" id="example" width="100%">
		<thead>
			<th> Code </th>
			<th> Title </th>
			<th> Start Time </th>
			<th> End Time </th>
			<th> Register </th>
		</thead>
		<tbody>
		{% for contest in future_contest %}	
		<tr class="gradeA">
			<td>{{ contest.code }} </td>
			<td>{{ contest.name }}</td>
			<td>{{ contest.startTime }}</td>
			<td>{{ contest.endTime }}</td>
			{% if request.user in contest.users.all %}
			<td>registered</td>
			{% else %}
			<td><a href="/contest/{{ contest.code }}/register/">Register</a></td>
			{% endif %}
		</tr>
		{% endfor %}
	</tbody>
</table>
{% endif %}
{% if past_contest %}
<br>
<hr>
<br>
<br>
	<h3>Past Contest:</h3>
	<table cellpadding="0" cellspacing="0" border="0" class="display" id="example" width="100%">
		<thead>
			<th> Code </th>
			<th> Title </th>
			<th> Start Time </th>
			<th> End Time </th>
		</thead>
		<tbody>
		{% for contest in past_contest %}	
		<tr class="gradeA">
			<td>{{ contest.code }} </td>
			<td><a href="/contest/{{ contest.code }}/">{{ contest.name }}</a></td>
			<td>{{ contest.startTime }}</td>
			<td>{{ contest.endTime }}</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
{% endif %}
</div>
{% endblock %}

{% block sidebar %}
<h2> Recent Activity</h2>
{% include 'judge/recent_activity.html' %}
{% endblock %}

